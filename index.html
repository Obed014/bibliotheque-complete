<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bibliotheque Complete</title>
    <script src="https://cdn.supabase.io/supabase-js/2.0/supabase.js"></script>
</head>
<body>
    <div id="auth">
        <h2>Login</h2>
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Login</button>
        <button onclick="signup()">Sign Up</button>
    </div>
    <div id="content" style="display: none;">
        <!-- Your content here -->
    </div>

    <script>
        const supabaseUrl = 'YOUR_SUPABASE_URL';
        const supabaseKey = 'YOUR_SUPABASE_ANON_KEY';
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        async function login() {
            const { user, error } = await supabase.auth.signIn({
                email: document.getElementById('email').value,
                password: document.getElementById('password').value
            });
            if (error) console.log('Error logging in:', error);
            else {
                document.getElementById('auth').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                syncData(); // Call the function to sync data with Supabase
            }
        }

        async function signup() {
            const { user, error } = await supabase.auth.signUp({
                email: document.getElementById('email').value,
                password: document.getElementById('password').value
            });
            if (error) console.log('Error signing up:', error);
        }

        async function syncData() {
            const { data, error } = await supabase
                .from('your_table')
                .select('*');

            // Handle syncing here...
        }

        // Add real-time subscription for changes
        supabase
            .from('your_table')
            .on('*', payload => {
                console.log('Change received!', payload);
                // Update UI based on the changes
            })
            .subscribe();
    </script>
</body>
</html>